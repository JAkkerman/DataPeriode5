<!DOCTYPE html>
<html>
  <head>
    <title>OECD Barchart</title>
  </head>

  <style>

			div.bar {
				display: inline-block;
				width: 40px;
        margin-right: 3px;
				background-color: #0ba828;
			}

  </style>

  <body>
    <p><b>OECD data on renewable energy</b></p>
    <p><i>This barchart shows the percentage of the total electricity
          production that comes from renewable sources.</i></p>
    <p>Joos Akkerman (11304723)</p>

    <!-- This is where your bar chart will go -->
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script type="text/javascript">

        d3.json("data.json").then(function(data) {
          console.log(data)

          d3.select("body").selectAll("div")

              var w = 500;
              var h = 300;
              var barPadding = 2
              var svg = d3.select("body")
                .append("svg")
                .attr("width", w)
                .attr("height", h);

                svg.selectAll("rect")
                  .data(data)
                  .enter()
                  .append("rect")
                  .attr("y", function(d) {
                      return h - 3*d["%RENEW"];
                    })
                  .attr("width", w / data.length - barPadding)
                  .attr("height", function(d) {
                      return 3*d["%RENEW"];
                    })
                  .attr("x", function(d, i) {
                      return i * (w / data.length)
                    })
                  .attr("fill", function(d) {
                    if (d["%RENEW"] > 70) {
                      return "rgb(0, 252, 1)";
                    }
                    else if (d["%RENEW"] > 50) {
                      return "rgb(178, 254, 1)";
                    }
                    else if (d["%RENEW"] > 30) {
                      return "rgb(176, 252, 99)";
                    }
                    else if (d["%RENEW"] > 10) {
                      return "rgb(231, 252, 99)";
                    }
                    else {
                      return "rgb(162, 106, 75)";
                    }
                    })

                  svg.selectAll("text")
                   .data(data)
                   .enter()
                   .append("text")
                   .text(function(d) {
                          console.log(d["%RENEW"])
                          return d["%RENEW"];
                    })
                    .attr("x", function(d, i) {
                         return i * (w / data.length) + (w / data.length - barPadding) / 2;
                    })
                    .attr("y", function(d) {
                         return h - (3*d["%RENEW"]-14);
                    })
                    .attr("font-family", "sans-serif")
                    .attr("font-size", "12px")
                    .attr("text-anchor", "middle");
              });

    </script>
  </body>
</html>
